version: "3.1"

intents:
  - nlu_fallback
  - secondary_fallback
  - greet 
  - inform_main_item
  - inform_business_item
  - inform_scenario
  - inform_detail_type
  - ask_disability_service
  - ask_service_details
  - inform_district

actions:
  # - action_session_start  # 声明使用系统默认动作
  - action_query_materials
  - action_query_business_items
  - action_query_scenarios
  - action_ask_main_item
  - action_ask_business_item
  - action_ask_scenario
  - action_ask_district
  - action_query_service_details
  - validate_main_item_form

entities:
  - main_item
  - business_item
  - scenario
  - detail_type  # 新增查询信息类型的实体
  - district 
  - metion

slots:
  main_item:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: main_item
    # - type: custom
    #   action: validate_main_item_form
    #   conditions:
    #     - active_loop: disability_service_form  # 只在表单中触发  # 触发自定义验证
    #     - active_loop: service_details_form
  business_item:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: business_item
  scenario:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: scenario
  detail_type:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: detail_type
  district:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: district
  metion:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: metion

responses:
  utter_welcome:
    # - text: "您好！我是您的助手，请问有什么可以帮您？"
    # 可添加按钮
    - text: "欢迎使用！请选择："
      buttons:
        - title: "材料查询"
          payload: "/ask_disability_service"
        - title: "办理地点相关"
          payload: "/ask_service_details"
  utter_fallback:
    - text: "我没理解您的意思，请再试一次。"
  utter_escalate:
    - text: "正在转接人工客服..."
  utter_ask_main_item:
    - text: "请选择您要查询的主项名称：\n- 残疾人证办理!\n- 残疾人康复服务!"
  utter_ask_business_item:
    - text: "请选择业务办理项名称：\n{options}"
  utter_ask_scenario:
    - text: "请选择情形：\n{options}"
  utter_show_materials:
    - text: "您需要准备以下材料：\n{materials}"
  utter_no_materials_found:
    - text: "未找到对应的材料信息，请确认您的选择是否正确。"
  utter_ask_detail_type:
    - text: "您想查询哪方面的信息？\n- 办理地点\n- 办理时间\n- 咨询方式\n- 是否收费\n- 承诺办结时限\n- 全部信息"
  

forms:
  disability_service_form:
    required_slots:
      - main_item
      - business_item
      - scenario
  service_details_form:
    required_slots:
      - main_item
      - business_item
      - district
      - detail_type
